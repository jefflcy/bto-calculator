<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <title>HDB BTO Calculator</title>
    <link rel="stylesheet" href="src/style.css">
</head>
<body>
    <div class="container">
        <h1>HDB BTO Payment Calculator</h1>
        <p class="info-text">Calculate your payment breakdown across all three appointments</p>

        <h2>Property Details</h2>
        
        <label for="unitPrice">Unit Price ($)</label>
        <input type="number" id="unitPrice" placeholder="e.g., 450000" min="0" step="1000">

        <div>
            <label for="flatType">Flat Type</label>
            <input type="hidden" id="flatType" value="4rm">
            <div class="option-row" data-name="flatType">
                <span class="bubble" data-value="2rm">2-Room Flexi</span>
                <span class="bubble" data-value="3rm">3-Room</span>
                <span class="bubble selected" data-value="4rm">4-Room</span>
                <span class="bubble" data-value="5rm">5-Room</span>
                <span class="bubble" data-value="3gen">3-Gen</span>
            </div>
        </div>

        <div>
            <label for="scheme">Payment Scheme</label>
            <input type="hidden" id="scheme" value="no-scheme">
            <div class="option-row" data-name="scheme">
                <span class="bubble selected" data-value="no-scheme">No Scheme</span>
                <span class="bubble" data-value="staggered">Staggered Downpayment</span>
                <span class="bubble" data-value="deferred">Deferred Income Assessment</span>
            </div>
        </div>

        <div class="grid">
            <div>
                <label for="loanType">Loan Type</label>
                <input type="hidden" id="loanType" value="hdb">
                <div class="option-row" data-name="loanType">
                    <span class="bubble" data-value="no-loan">No Loan</span>
                    <span class="bubble selected" data-value="hdb">HDB Loan</span>
                    <span class="bubble" data-value="bank">Bank Loan</span>
                </div>
            </div>
            <div>
                <label for="age">Applicant Age</label>
                <input type="hidden" id="age" value="35">
                <div class="option-row" data-name="age">
                    <span class="bubble selected" data-value="35">
                        ≤35
                        <span class="min-income-wrap" style="margin-left: 4px;">
                            <span class="tooltip-icon">&#9432;</span>
                            <span class="tooltip-content">
                                <span class="tooltip-line">23% of wage contributed to OA.</span>
                            </span>
                        </span>
                    </span>
                    <span class="bubble" data-value="45">
                        36–45
                        <span class="min-income-wrap" style="margin-left: 4px;">
                            <span class="tooltip-icon">&#9432;</span>
                            <span class="tooltip-content">
                                <span class="tooltip-line">21% of wage contributed to OA.</span>
                            </span>
                        </span>
                    </span>
                    <span class="bubble" data-value="50">
                        46–50
                        <span class="min-income-wrap" style="margin-left: 4px;">
                            <span class="tooltip-icon">&#9432;</span>
                            <span class="tooltip-content">
                                <span class="tooltip-line">19% of wage contributed to OA.</span>
                            </span>
                        </span>
                    </span>
                    <span class="bubble" data-value="55">
                        51–55
                        <span class="min-income-wrap" style="margin-left: 4px;">
                            <span class="tooltip-icon">&#9432;</span>
                            <span class="tooltip-content">
                                <span class="tooltip-line">15% of wage contributed to OA.</span>
                            </span>
                        </span>
                    </span>
                </div>
            </div>
        </div>

        <button onclick="calculate()">Calculate Payments</button>

        <div id="results" class="results" style="display: none;"></div>

        <button id="shareButton" type="button" class="secondary" style="display: none;">Share</button>
        <div id="shareStatus" class="share-status" style="display: none;"></div>

        <div class="page-footer">
            <a href="https://t.me/iluvcarbonara" target="_blank" rel="noopener noreferrer">Built by @iluvcarbonara :)</a>
            <span class="footer-warning min-income-wrap no-export" aria-label="tell me what's wrong here">
                <a
                    class="footer-warning-link"
                    href="https://bto-calculator.fillout.com/t/c3Lu3N2Tp9us"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="tell me what's wrong here"
                >
                    <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                        <path d="M12 3.5l10 18H2l10-18z" fill="none" stroke="currentColor" stroke-width="1.8"></path>
                        <path d="M12 9v6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"></path>
                        <circle cx="12" cy="18" r="1.2" fill="currentColor"></circle>
                    </svg>
                </a>
                <span class="tooltip-content" role="tooltip">
                    <span class="tooltip-line">tell me what's wrong here</span>
                </span>
            </span>
        </div>
    </div>

    <div id="shareModalOverlay" class="modal-overlay" style="display:none;" aria-hidden="true">
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="shareModalTitle">
            <div class="modal-header">
                <h3 id="shareModalTitle" class="modal-title">Preview</h3>
                <button id="shareModalClose" type="button" class="secondary modal-close">Close</button>
            </div>
            <div class="modal-body">
                <div class="modal-preview">
                    <img id="shareModalImage" alt="PNG preview" />
                </div>
            </div>
            <div class="modal-footer">
                <div class="modal-actions">
                    <button id="shareModalCopy" type="button">Copy</button>
                    <button id="shareModalDownload" type="button">Download</button>
                </div>
            </div>
        </div>
    </div>

    <script src="src/main.js"></script>
</body>
</html>
